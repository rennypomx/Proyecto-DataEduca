<div data-page="upload">
  <h1>‚¨ÜÔ∏è Generador de Reportes</h1>
  <p class="subtitle">Genera reportes desde tu archivo cargado o sube uno nuevo.</p>

  <!-- === Archivo Actual === -->
  <div id="archivo-actual-box" class="info-box" style="display:none; margin-bottom: 20px; padding: 15px; background: #e8f4f8; border-radius: 8px; border-left: 4px solid #2196F3;">
    <h3 style="margin-top: 0;">Archivo Actual</h3>
    <p><strong>Nombre:</strong> <span id="archivo-nombre">-</span></p>
    <p><strong>Fecha de carga:</strong> <span id="archivo-fecha">-</span></p>
    <p><strong>Estudiantes:</strong> <span id="archivo-num-estudiantes">0</span></p>
    <div style="margin-top: 10px;">
      <button type="button" id="btn-ver-archivos" class="btn-secondary" style="margin-right: 10px;">Ver Todos los Archivos</button>
      <button type="button" id="btn-cambiar-archivo" class="btn-secondary">üîÑ Cargar Nuevo Archivo</button>
    </div>
  </div>

  <!-- === Lista de Archivos (oculto por defecto) === -->
  <div id="lista-archivos-box" class="info-box" style="display:none; margin-bottom: 20px; padding: 15px; background: #f5f5f5; border-radius: 8px;">
    <h3>üìÅ Mis Archivos</h3>
    <div id="lista-archivos"></div>
    <button type="button" id="btn-cerrar-lista" class="btn-secondary" style="margin-top: 10px;">Cerrar</button>
  </div>

  <!-- === Formulario de Generaci√≥n de Reporte === -->
  <div id="form-generar-box" style="display:none;">
    <form id="generar-form" class="form-box">
      <label for="tipo-reporte-generar">Tipo de reporte:</label>
      <select id="tipo-reporte-generar">
        <option value="">Seleccionar...</option>
        <option value="grupal">Reporte Grupal</option>
        <option value="individual">Reporte Individual</option>
      </select>

      <div id="select-estudiante-generar" style="display:none;">
        <label for="estudiante-generar">Selecciona estudiante:</label>
        <select id="estudiante-generar">
          <option value="">Seleccionar...</option>
        </select>
      </div>

      <button type="submit" class="btn-primary">Generar Reporte</button>
    </form>
  </div>

  <!-- === Formulario de Subida (oculto por defecto) === -->
  <div id="form-upload-box">
    <h3>üì§ Subir Nuevo Archivo</h3>
    <form id="upload-form" class="form-box">
      <label for="file">Selecciona archivo Excel:</label>
      <input type="file" id="file" accept=".xlsx,.csv">

      <label for="tipo-reporte">Tipo de reporte:</label>
      <select id="tipo-reporte">
        <option value="">Seleccionar...</option>
        <option value="grupal">Reporte Grupal</option>
        <option value="individual">Reporte Individual</option>
      </select>

      <div id="select-estudiante" style="display:none;">
        <label for="estudiante">Selecciona estudiante:</label>
        <select id="estudiante">
          <option value="">Seleccionar...</option>
        </select>
      </div>

      <button type="submit" class="btn-primary">Subir y Generar Reporte</button>
    </form>
  </div>

  <!-- === Resultado del procesamiento === -->
  <div id="resultado" style="margin-top:20px;"></div>

  <!-- === Vista previa del reporte === -->
  <div id="preview-box" class="resultado-box" style="display:none;">
    <iframe id="preview-frame" style="width:100%; height:500px; border:1px solid #ccc; border-radius:8px;"></iframe>
  </div>
</div>

<style>
.info-box h3 {
  color: #333;
  margin-bottom: 10px;
}

.archivo-item {
  padding: 10px;
  margin: 10px 0;
  background: white;
  border-radius: 6px;
  border: 1px solid #ddd;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.archivo-item.activo {
  border-color: #2196F3;
  background: #e3f2fd;
}

.archivo-item-info {
  flex: 1;
}

.archivo-item-actions button {
  margin-left: 5px;
  padding: 5px 10px;
  font-size: 0.9em;
}

.btn-secondary {
  background: #757575;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 1em;
}

.btn-secondary:hover {
  background: #616161;
}
</style>
